<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>mastodon-api-test</title>
    <script src="../node_modules/dev-kit/dist/dev-kit.js"></script>
  </head>
  <body>
    <dev-kit></dev-kit>
  </body>
</html>



<script type="module">
import APIUtil from "../src/APIUtilV2.js";
import storage from "../src/storage.js";

const mastodon_url = "https://mental.social";

window.run1 = ()=> {
  APIUtil.url(mastodon_url)
  .timeline({limit: 40})
  .local()
  .then((statuses)=> statuses.forEach(({content})=> console.log(content)));
}

window.run2 = ()=> console.log(JSON.stringify(state));

APIUtil.onresponsed = (responsed)=> console.log(responsed);

window.onpagehide =
window.onbeforeunload = 
window.onunload = ()=> {
  storage.set("STATE", state);
  console.log("state saved");
}
</script>