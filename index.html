<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>mastodon-api-test</title>
    <script type="module" src="./src/mastodon-api-test.js"></script>
  </head>
  <body>
    <mastodon-api-test></mastodon-api-test>
  </body>
</html>

<script>
  const search = new URL(location).searchParams;
  const mastodon_url = search.get("mastodon_url");
  const access_token = search.get("access_token");

  let mat = document.querySelector("mastodon-api-test");
  if (mastodon_url) {
    mat.setAttribute("mastodon-url", mastodon_url);
    if (access_token) {
      mat.setAttribute("access-token", access_token);
    }
  }
  else {
    const login_url = new URL("./oauth/login.html", location);
    location.href = login_url;
  }
</script>
